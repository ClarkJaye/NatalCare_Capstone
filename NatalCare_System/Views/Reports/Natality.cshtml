@{
    ViewData["Title"] = "Natality Reports";
    ViewData["NavTitle"] = "Natality Reports";
    Layout = "_UserLayout";
}

<!-- NAVBAR -->
<partial name="Partial/_Navbar" />

<div class="mx-4">
    <div class="row">
        <div class="col-md-4 mb-sm-3">
            <!-- Delivery Type Distribution (Doughnut Graph) -->
            <div class="card h-100 p-3">
                <h6 class="card-title">Delivery Type Distribution</h6>
                <canvas id="doughnutGraph"></canvas>
            </div>
        </div>
        <div class="col-md-4 mb-sm-3">
            @* Deliveries Attended by Skilled Health Professionals (Pie Graph) *@
            <div class="card h-100 p-3">
                <h6 class="card-title">Deliveries Attended by Skilled Health Professionals</h6>
                <canvas id="pieGraph"></canvas>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card p-3 mb-4">
                <h6 class="card-title">Generate Natality Reports</h6>
                <div class="d-flex align-items-center justify-content-end gap-3">
                    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#NatalReportModal">
                        <i class="fas fa-file-pdf"></i>
                        Generate
                    </button>
                </div>
            </div>

            <div class="card p-3 mb-4">
                <h6 class="card-title">Generate Patient List Reports</h6>
                <div class="d-flex align-items-center justify-content-end gap-3">
                    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#NatalReportModal">
                        <i class="fas fa-file-pdf"></i>
                        Generate
                    </button>
                </div>
            </div>

            <div class="card p-3 mb-4">
                <h6 class="card-title">Generate Newborn List Reports</h6>
                <div class="d-flex align-items-center justify-content-end gap-3">
                    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#NatalReportModal">
                        <i class="fas fa-file-pdf"></i>
                        Generate
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Newborn Modal -->
<div class="modal fade" id="NewbornReportModal" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen-sm-down">
        <div class="modal-content">
            <div class="modal-header bg-pink">
                <h5 class="modal-title">Start Date and End Date</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form asp-controller="Reports" asp-action="NewbornReport">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="startDate" class="control-label">Start Date</label>
                            <input type="date" id="startDate" name="startDate" class="form-control" required />
                        </div>

                        <div class="col-md-6 mb-3">
                            <label for="endDate" class="control-label">End Date</label>
                            <input type="date" id="endDate" name="endDate" class="form-control" required />
                        </div>

                        <div class="col-12 mt-3 d-flex justify-content-end">
                            <div class="d-flex align-items-center gap-3">
                                @*  <button class="btn btn-danger generateNatalPdfBtn" disabled >
                                    <i class="fas fa-file-pdf"></i>
                                    PDF
                                </button> *@
                                <button type="submit" class="btn btn-success generateNatalBtn">
                                    <i class="fas fa-file-excel"></i>
                                    Generate
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


<!-- Patient Modal -->
<div class="modal fade" id="PatientReportModal" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen-sm-down">
        <div class="modal-content">
            <div class="modal-header bg-pink">
                <h5 class="modal-title">Start Date and End Date</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form asp-controller="Reports" asp-action="PatientReport">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="startDate" class="control-label">Start Date</label>
                            <input type="date" id="startDate" name="startDate" class="form-control" required />
                        </div>

                        <div class="col-md-6 mb-3">
                            <label for="endDate" class="control-label">End Date</label>
                            <input type="date" id="endDate" name="endDate" class="form-control" required />
                        </div>

                        <div class="col-12 mt-3 d-flex justify-content-end">
                            <div class="d-flex align-items-center gap-3">
                                @*  <button class="btn btn-danger generateNatalPdfBtn" disabled >
                                    <i class="fas fa-file-pdf"></i>
                                    PDF
                                </button> *@
                                <button type="submit" class="btn btn-success generateNatalBtn">
                                    <i class="fas fa-file-excel"></i>
                                    Excel
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


<!-- Natality Modal -->
<div class="modal fade" id="NatalReportModal" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen-sm-down">
        <div class="modal-content">
            <div class="modal-header bg-pink">
                <h5 class="modal-title">Start Date and End Date</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form asp-controller="Reports" asp-action="NatalityReport">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="startDate" class="control-label">Start Date</label>
                            <input type="date" id="startDate" name="startDate" class="form-control" required />
                        </div>

                        <div class="col-md-6 mb-3">
                            <label for="endDate" class="control-label">End Date</label>
                            <input type="date" id="endDate" name="endDate" class="form-control" required />
                        </div>

                        <div class="col-12 mt-3 d-flex justify-content-end">
                            <div class="d-flex align-items-center gap-3">
                               @*  <button class="btn btn-danger generateNatalPdfBtn" disabled >
                                    <i class="fas fa-file-pdf"></i>
                                    PDF
                                </button> *@
                                <button type="submit" class="btn btn-success generateNatalBtn" >
                                    <i class="fas fa-file-excel"></i>
                                    Generate
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>



<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Delivery Types (Doughnut Chart)
        const deliveryData = {
            labels: ['Cesarean', 'Vaginal'],
            datasets: [{
                label: 'Delivery Type Statistics',
                data: [80, 120], // Example data: 80 Cesarean, 120 Vaginal
                backgroundColor: [
                    'rgba(255, 99, 132, 0.7)', // Cesarean
                    'rgba(54, 162, 235, 0.7)'  // Vaginal
                ],
                hoverOffset: 4
            }]
        };
        const deliveryConfig = {
            type: 'doughnut',
            data: deliveryData,
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    title: {
                        display: false,
                        text: 'Delivery Type Distribution'
                    }
                }
            }
        };
        new Chart(document.getElementById('doughnutGraph'), deliveryConfig);

        // Skilled Health Professionals (Pie Chart)
        const skilledData = {
            labels: ['Physician', 'Nurse', 'Midwife'],
            datasets: [{
                label: 'Skilled Health Professionals',
                data: [60, 40, 100], // Example data
                backgroundColor: [
                    'rgba(75, 192, 192, 0.7)', // Physician
                    'rgba(153, 102, 255, 0.7)', // Nurse
                    'rgba(255, 159, 64, 0.7)'   // Midwife
                ],
                hoverOffset: 4
            }]
        };
        const skilledConfig = {
            type: 'pie',
            data: skilledData,
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    title: {
                        display: false,
                        text: 'Deliveries Attended by Skilled Health Professionals'
                    }
                }
            }
        };
        new Chart(document.getElementById('pieGraph'), skilledConfig);

    });

</script>